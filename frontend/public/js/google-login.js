const ALLOWED_EMAILS = ['*'];
const GOOGLE_CLIENT_ID = '737880255453-cuk77pb3f3mjk4iu5kjmg54ida2uom7d.apps.googleusercontent.com';
function base64UrlDecode(str){const pad='='.repeat((4-(str.length%4))%4);const b64=(str.replace(/-/g,'+').replace(/_/g,'/')+pad);return atob(b64);} 
function handleCredentialResponse(resp){try{const jwt=resp.credential;const parts=jwt.split('.');if(parts.length!==3)throw new Error('Token invÃ¡lido');const payload=JSON.parse(base64UrlDecode(parts[1]));const email=payload.email;const successEl=document.getElementById('googleSuccess');const errorEl=document.getElementById('googleError');const allowed=(ALLOWED_EMAILS.includes('*')||ALLOWED_EMAILS.includes(email));if(!allowed){errorEl.textContent='Email no autorizado';errorEl.classList.remove('hidden');successEl.classList.add('hidden');return;}successEl.textContent='Acceso correcto: '+email;successEl.classList.remove('hidden');errorEl.classList.add('hidden');setTimeout(()=>{window.location.href='/status.html';},1200);}catch(e){const errorEl=document.getElementById('googleError');errorEl.textContent='Error autenticando: '+e.message;errorEl.classList.remove('hidden');}}
